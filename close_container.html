<!DOCTYPE HTML>
<html>
<head>
  <title>S<sup>2</sup>-Diffusion - Close Container Experiments</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="assets/css/main.css" />
  <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
  <style>
    .category-title { width: 100%; margin-top: 40px; margin-bottom: 12px; }
    .video-grid { display: flex; flex-wrap: wrap; gap: 20px; }
    .video-item { width: 320px; }
    .video-item h4 { margin: 0 0 .4rem 0; font-weight: 600; }
    .subtle { opacity: .85; font-weight: 400; }
    .filters { display: flex; gap: 12px; align-items: center; margin: 10px 0 24px; }
    .filters label { font-size: 0.95em; }
    .hidden { display: none !important; }
  </style>
</head>
<body class="is-preload">

<header id="header">
  <a href="index.html" class="title">
    S<sup>2</sup>-Diffusion: Close Container (Rice / Choco)
  </a>
  <nav>
    <ul><li><a href="index.html">Home</a></li></ul>
  </nav>
</header>

<div id="wrapper">
  <section id="main" class="wrapper style3 spotlight">
    <div class="inner">
      <article class="work-item">
        <h2>S<sup>2</sup>-Diffusion – Close Container Experiments</h2>
        <p class="subtle">Grouped by material and method.</p>
      </article>

      <!-- Optional simple filters -->
      <div class="filters">
        <label>
          Material:
          <select id="materialFilter">
            <option value="all" selected>All</option>
            <option value="choco">Choco</option>
            <option value="rice">Rice</option>
          </select>
        </label>
        <label>
          Method:
          <select id="methodFilter">
            <option value="all" selected>All</option>
            <option value="s2">S²-Diffusion</option>
            <option value="dp_rgb">DP – RGB</option>
            <option value="dp_depth">DP – Depth</option>
          </select>
        </label>
      </div>

      <div id="video-sections"></div>
    </div>
  </section>
</div>

<footer id="footer" class="wrapper alt">
  <div class="inner">
    <ul class="menu">
      <li>&copy; All rights reserved.</li>
      <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
    </ul>
  </div>
</footer>

<!-- Scripts (keep your theme’s JS if you want scroll/animations) -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.scrollex.min.js"></script>
<script src="assets/js/jquery.scrolly.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>

<!-- Build the page from your filenames -->
<script>
  const BASE_PATH = "videos/"; // videos folder

  // Trial index helpers
  const seq = (start, end) => Array.from({ length: end - start + 1 }, (_, i) => i + start);
  const t = (set, i) => `${set}_${i}`; // e.g., t("1","3") -> "1_3"

  // Map your files into display groups
  const groups = [
    // CHOCO
    {
      title: "S²-Diffusion – Choco",
      material: "choco",
      method: "s2",
      prefix: "choco_trial",
      trials: [
        ...seq(1, 9).map(i => t("1", i)), // 1_1 ... 1_9
        ...seq(1, 9).map(i => t("2", i)), // 2_1 ... 2_9
      ],
      suffix: "_S2_Diffusion.mp4"
    },
    {
      title: "DP – RGB – Choco",
      material: "choco",
      method: "dp_rgb",
      prefix: "choco_trial",
      trials: [
        ...seq(1, 9).map(i => t("1", i)), // only 1_* for DP_RGB
      ],
      suffix: "_DP_RGB.mp4"
    },

    // RICE
    {
      title: "S²-Diffusion – Rice",
      material: "rice",
      method: "s2",
      prefix: "rice_trial",
      trials: [
        ...seq(1, 9).map(i => t("1", i)), // 1_1 ... 1_9
        ...seq(1, 9).map(i => t("2", i)), // 2_1 ... 2_9
      ],
      suffix: "_S2_Diffusion.mp4"
    },
    {
      title: "DP – RGB – Rice",
      material: "rice",
      method: "dp_rgb",
      prefix: "rice_trial",
      trials: [
        ...seq(1, 9).map(i => t("1", i)),
        ...seq(1, 9).map(i => t("2", i)),
      ],
      suffix: "_DP_RGB.mp4"
    },
    {
      title: "DP – Depth – Rice",
      material: "rice",
      method: "dp_depth",
      prefix: "rice_trial",
      trials: [
        ...seq(1, 9).map(i => t("1", i)), // only 1_* have DP_Depth
      ],
      suffix: "_DP_Depth.mp4"
    }
  ];

  const videoSections = document.getElementById("video-sections");

  // Build each group section
  groups.forEach(group => {
    const sectionId = `${group.material}_${group.method}`;
    videoSections.insertAdjacentHTML("beforeend", `
      <h3 class="category-title" data-material="${group.material}" data-method="${group.method}">${group.title}</h3>
      <div class="video-grid" id="${sectionId}" data-material="${group.material}" data-method="${group.method}"></div>
    `);

    const container = document.getElementById(sectionId);

    group.trials.forEach(trial => {
      const fileName = `${group.prefix}${trial}${group.suffix}`;
      const filePath = `${BASE_PATH}${fileName}`;

      container.insertAdjacentHTML("beforeend", `
        <div class="video-item">
          <article class="work-item">
            <h4>trial ${trial.replace('_', '.')} — <span style="font-weight:500">${filePath}</span></h4>
            <video width="320" height="240" controls preload="none" playsinline>
              <source src="${filePath}" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </article>
        </div>
      `);
    });
  });

  // Simple filters
  const materialFilter = document.getElementById("materialFilter");
  const methodFilter = document.getElementById("methodFilter");

  function applyFilters() {
    const m = materialFilter.value; // "all" | "choco" | "rice"
    const s = methodFilter.value;   // "all" | "s2" | "dp_rgb" | "dp_depth"

    document.querySelectorAll(".category-title, .video-grid").forEach(el => {
      const elM = el.getAttribute("data-material");
      const elS = el.getAttribute("data-method");
      const matchM = (m === "all") || (elM === m);
      const matchS = (s === "all") || (elS === s);
      el.classList.toggle("hidden", !(matchM && matchS));
    });
  }

  materialFilter.addEventListener("change", applyFilters);
  methodFilter.addEventListener("change", applyFilters);
  applyFilters();
</script>

</body>
</html>
